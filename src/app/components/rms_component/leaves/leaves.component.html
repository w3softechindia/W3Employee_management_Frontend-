<app-rms-navbar></app-rms-navbar>

<div class="employee-interview-details-container">
  <h3 class="h31">Leave Requests</h3>
  <div class="table-scroll-container">
    <table>
      <thead>
        <tr>
          <th>Employee ID</th>
          <th>Name</th>
          <th>Leave ID</th>
          <th>Leave Type</th>
          <th>From Date</th>
          <th>To Date</th>
          <th>Total Days</th>
          <th>Reason</th>
          <th>TL Approval</th>
          <th>HR Approval</th>
          <th>Leave Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let request of leave">
          <td>{{ request.employeeId }}</td>
          <td>{{ request.employeeName }}</td>
          <td>{{ request.leaveId }}</td>
          <td>{{ request.leaveType }}</td>
          <td>{{ request.startDate }}</td>
          <td>{{ request.endDate }}</td>
          <td>{{ request.totalDays }}</td>
          <td>{{ request.reason }}</td>
          <td>{{ request.tlApproval }}</td>
          <td>{{ request.hrApproval }}</td>
          <td>{{ request.status }}</td>
          <td>
            <button class="update-btn" (click)="openEditPopup(request)">
              Update
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- <div *ngIf="showPopup" class="popup-container">
  <h3>Edit Leave Details</h3>

  <form #form="ngForm">
    <label for="tlApproval">TlApproval</label>
    <select
      id="tlApproval"
      [(ngModel)]="tlApproval"
      [ngModelOptions]="{ standalone: true }"
      class="select mat-select"
      placeholder="Select"
      required
      #tlApprovalModel="ngModel"
    >
    <option value="" disabled selected>Select</option>
      <option *ngFor="let data of selectedList1" [value]="data.value">
        {{ data.value }}
      </option>
    </select>
    <div *ngIf="tlApprovalModel.invalid && tlApprovalModel.touched">
      <span class="error">This field is required</span>
    </div>

    <label for="hrApproval">HrApproval</label>
    <select
      id="hrApproval"
      [(ngModel)]="hrApproval"
      [ngModelOptions]="{ standalone: true }"
      class="select mat-select"
      placeholder="Select"
      required
      #hrApprovalModel="ngModel" 
    >
    <option value="" disabled selected>Select</option>
      <option *ngFor="let data of selectedList1" [value]="data.value">
        {{ data.value }}
      </option>
    </select>
    <div *ngIf="hrApprovalModel.invalid && hrApprovalModel.touched">
      <span class="error">This field is required</span>
    </div>

    <button class="update-btn" (click)="confirmEdit()" [disabled]="form.invalid">Save</button>
    <button class="update-btn" (click)="closePopup()">Cancel</button>
  </form>
</div> -->

<div *ngIf="showPopup" class="popup-container">
  <h3>Update Leave Status</h3>
  
  <form #form="ngForm">
    <label for="tlApproval">TlApproval</label>
    <select
      id="tlApproval"
      [(ngModel)]="tlApproval"
      [ngModelOptions]="{ standalone: true }"
      class="select mat-select"
      required
      #tlApprovalModel="ngModel"
    >
      <option value="" disabled selected>Select</option>
      <option *ngFor="let data of selectedList1" [value]="data.value">
        {{ data.value }}
      </option>
    </select>
    <div *ngIf="tlApprovalModel.invalid && tlApprovalModel.touched">
      <span class="error">This field is required</span>
    </div>

    <label for="hrApproval">HrApproval</label>
    <select
      id="hrApproval"
      [(ngModel)]="hrApproval"
      [ngModelOptions]="{ standalone: true }"
      class="select mat-select"
      required
      #hrApprovalModel="ngModel"
    >
      <option value="" disabled selected>Select</option>
      <option *ngFor="let data of selectedList1" [value]="data.value">
        {{ data.value }}
      </option>
    </select>
    <div *ngIf="hrApprovalModel.invalid && hrApprovalModel.touched">
      <span class="error">This field is required</span>
    </div>

    <!-- Save button with disabled logic -->
    <button
      class="update-btn hover"
      [disabled]="!isFormValid()"
      [ngClass]="{ 'disabled-btn': !isFormValid() }"
      (click)="confirmEdit()"
    >
      Save
    </button>
    <button class="update-btn" (click)="closePopup()">Cancel</button>
  </form>
</div>


     
