
<app-admin-navbar></app-admin-navbar>

<div class="body">
  <div class="container">
    <div style="text-align: center;">

      <h3 class="title">Add Course</h3>
    </div>
    <div class="content">
      <form [formGroup]="courseForm" (ngSubmit)="addCourse()">
        <!-- Course Name -->
        <!-- <div class="form-group">
          <label for="courseName" class="form-label">Course Name</label>
          <input id="courseName" type="text" class="form-control" formControlName="courseName">
          <div *ngIf="courseForm.get('courseName')?.invalid && (courseForm.get('courseName')?.touched || courseForm.get('courseName')?.dirty)">
            <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.required">Course Name is required</small>
            <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.dirtyData">Course Name contains invalid characters</small>
       
            <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.maxlength">
              Course Name cannot be more than 15 characters.
            </small>
          </div>
        </div>

        <!-- Course Duration -->
        <!-- <div class="form-group">
          <label for="courseDuration" class="form-label">Course Duration</label>
          <input id="courseDuration" type="number" class="form-control" formControlName="courseDuration">
          <div *ngIf="courseForm.get('courseDuration')?.invalid && (courseForm.get('courseDuration')?.touched || courseForm.get('courseDuration')?.dirty)">
            <small class="text-danger" *ngIf="courseForm.get('courseDuration')?.errors?.required">Course Duration is required</small>
            <small class="text-danger" *ngIf="courseForm.get('courseDuration')?.errors?.pattern">Course Duration must be a number</small>
          </div>
        </div> --> 
        <div class="form-row">
          <div class="form-group">
            <label for="courseName">Course Name</label>
            <input type="text" id="courseName" name="courseName" class="form-control" formControlName="courseName">
            <div *ngIf="courseForm.get('courseName')?.invalid && (courseForm.get('courseName')?.touched || courseForm.get('courseName')?.dirty)">
              <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.required"> courseName is required</small>
              <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.pattern"> courseName must be a number</small>
              
                <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.minlength"> courseName is required</small>
                <small class="text-danger" *ngIf="courseForm.get('courseName')?.errors?.maxlength"> courseName must be a number</small>
              
            </div>
          </div>
          <div class="form-group">
            <label for="duration">Duration</label>
            <input type="text" id="duration" name="duration" class="form-control" formControlName="courseDuration">
            <div *ngIf="courseForm.get('courseDuration')?.invalid && (courseForm.get('courseDuration')?.touched || courseForm.get('courseDuration')?.dirty)">
              <small class="text-danger" *ngIf="courseForm.get('courseDuration')?.errors?.required">Course Duration is required</small>
              <small class="text-danger" *ngIf="courseForm.get('courseDuration')?.errors?.pattern">Course Duration must be a number</small>
            </div>
          </div>
        </div>

        <!-- Sub Courses -->
        <div formArrayName="subCourses">
          <div *ngFor="let subCourse of subCourses.controls; let i = index" [formGroupName]="i">
            <div class="form-group">
              <label for="subCourseName-{{i}}">Sub Course Name</label>
              <input type="text" id="subCourseName-{{i}}" class="form-control" formControlName="subCourseName">
              <div *ngIf="subCourse.get('subCourseName')?.invalid && (subCourse.get('subCourseName')?.touched || subCourse.get('subCourseName')?.dirty)">
                <small class="text-danger" *ngIf="subCourse.get('subCourseName')?.errors?.required">Sub Course Name is required</small>
              </div>
            </div>
            <div class="form-group subcourse-duration-group">
              <label for="subCourseDuration-{{i}}">Sub Course Duration</label>
              <div class="input-with-delete">
                <input type="number" id="subCourseDuration-{{i}}" class="form-control" formControlName="subCourseDuration">
                <i class="ri-delete-bin-line trash-icon" (click)="removeSubCourse(i)"></i>
              </div>
              <div *ngIf="subCourse.get('subCourseDuration')?.invalid && (subCourse.get('subCourseDuration')?.touched || subCourse.get('subCourseDuration')?.dirty)">
                <small class="text-danger" *ngIf="subCourse.get('subCourseDuration')?.errors?.required">Sub Course Duration is required</small>
                <small class="text-danger" *ngIf="subCourse.get('subCourseDuration')?.errors?.pattern">Sub Course Duration must be a number</small>
                <div *ngIf="courseForm.errors?.durationExceeded">
                  <small class="text-danger">The total duration of sub courses cannot exceed the course duration.</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Add Sub Course Button and Submit Button -->
        <div style="text-align: center;">
            <button type="button" class="button" (click)="addSubCourse()"><i class="ri-add-circle-line"></i> Add Sub Course</button>
          </div>
        
          <div style="text-align: center;margin-top: 20px;">
              <button type="submit" class="button">Submit Course</button>
            
        </div>
      </form>
    </div>
  </div>
</div>
