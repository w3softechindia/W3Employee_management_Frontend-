<app-bdm-navbar></app-bdm-navbar>

<div class="form-container">
  <div class="form-content">
    <div class="text-center" style="background-color: #4caf50; padding: 0.8rem; border-radius: 10px 10px 0 0;">
      <h5 class="w-100" id="updateModalLabel" style="color: white;">Deployment Process</h5>
    </div>
    <form (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group-inline">
          <label for="clientDetails">Client</label>
          <div class="custom-dropdown">
            <select id="clientDetails" class="form-control small-select" [(ngModel)]="selectedClient"
              name="clientDetails">
              <option value="" disabled selected>Select a Client</option>
              <option *ngFor="let client of clients" [value]="client.companyId">
                {{ client.companyName }}
              </option>
            </select>
          </div>
        </div>

        <div class="form-group-inline">
          <label for="status">Status</label>
          <div class="custom-dropdown">
            <select id="status" name="status" class="form-control small-select" [(ngModel)]="selectedStatus"
              (change)="checkFormValidity()">
              <option value="">Select Status</option>
              <option value="All">All</option>
              <option value="Good">Good</option>
              <option value="Average">Average</option>
              <option value="Poor">Poor</option>
            </select>
          </div>
        </div>

        <div class="form-group-inline">
          <label for="role">Role</label>
          <div class="custom-dropdown">
            <select id="role" name="role" class="form-control small-select" [(ngModel)]="selectedRole"
              (change)="checkFormValidity()">
              <option value="">Select Role</option>
              <option value="Developer">Developer</option>
              <option value="Tester">Tester</option>
            </select>
          </div>
        </div>

        <div class="form-group-inline">
          <label for="experience">Experience</label>
          <div class="custom-dropdown">
            <select id="experience" name="experience" class="form-control small-select" [(ngModel)]="selectedExperience"
              (change)="checkFormValidity()">
              <option value="" disabled selected>Select Experience</option>
              <option value="0-1">0-1 Years</option>
              <option value="1-2">1-2 Years</option>
              <option value="2+">2+ Years</option>
            </select>
          </div>
        </div>

      </div>

      <div class="form-row">

        <div class="form-group-inline" style="width: 55%;">
          <label for="employeeDetails">Employee Details</label>
          <div
            style="max-width: 100%; border: 1px solid #ddd; padding: 8px; border-radius: 8px; height: 80px; overflow-y: auto;">
            <div *ngFor="let employee of employeeList" class="employee-checkbox" style="display: flex; align-items: center;">
              
              <!-- Checkbox and employee name -->
              <div style="flex: 1; display: flex; align-items: center;">
                <input type="checkbox" [id]="'employee-' + employee.employeeId"
                  (change)="toggleEmployeeSelection(employee)" />
                <label [for]="'employee-' + employee.employeeId" style="margin-left: 8px;">
                  {{ employee.employeeId }} - {{ employee.firstName }} {{ employee.lastName }}
                </label>
              </div>
              
              <!-- Fixed-position Resume button -->
              <button type="button" *ngIf="employee.isSelected"
                (click)="viewResume(employee)" 
                style="
                  margin-left: auto; 
                  padding: 3px 6px; 
                  background-color: #4caf50; 
                  color: white; 
                  border: none; 
                  border-radius: 5px; 
                  display: flex; 
                  align-items: center; 
                  cursor: pointer;">
                <i class="fa fa-eye" aria-hidden="true" style="margin-right: 5px;"></i>
                Resume
              </button>
        
            </div>
          </div>
        </div>
        



      </div>



      <div class="form-row">
        <div class="form-group-inline" style="flex: 1;">
          <label for="emailSubject">Email Subject</label>
          <input type="text" id="emailSubject" name="emailSubject" class="form-control small-select"
            placeholder="Enter subject" [(ngModel)]="emailSubject" required aria-label="Email Subject">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group-inline-2">
          <label for="additionalInfo" style="font-weight: bold;">Email Body</label>
          <textarea id="additionalInfo" class="form-control large-textarea" placeholder="Enter additional info"
            [(ngModel)]="additionalInfo" name="additionalInfo" rows="4" required
            aria-label="Additional Information"></textarea>
        </div>
      </div>


      <div class="form-actions">
        <button type="submit" class="btn-primary small-btn" [disabled]="!isFormValid">Submit</button>
      </div>
    </form>
  </div>
</div>