

<!-- <app-bdm-navbar></app-bdm-navbar>
<div class="attendance-container">
  <div class="button-container">
    <button style="font-weight: bolder;" *ngIf="!isCheckedIn" class="checkin-button" (click)="checkIn()"
     [disabled]="!canCheckIn()"
     [ngClass]="{'disabled': !canCheckIn(), 'active': canCheckIn()}"
     [title]="!canCheckIn() ? 'You cannot check in at this time' : ''" 
     style="font-weight: bolder;">
      Check In
    </button>
    <button style="font-weight: bolder;" *ngIf="isCheckedIn" class="checkout-button" (click)="checkOut()" 
     [disabled]="!canCheckOut()"
     [ngClass]="{'disabled': !canCheckOut(), 'active': canCheckOut()}"
     style="font-weight: bolder;">
      Check Out
    </button>
  </div>
 

  <div class="attendance-history" *ngIf="attendanceList.length > 0">
    <div class="scrollable-table">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Check-In</th>
            <th>Check-Out</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of attendanceList">
            <td>{{ record.date }}</td>
            <td>{{ record.checkIn }}</td>
            <td>{{ record.checkOut }}</td>
            <td>{{ record.attendanceStatus }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  

  
<div *ngIf="showPopup" class="popup-overlay">
  <div class="popup-content">
    <h3 style="color: #4caf50; text-decoration: underline;">Attendance Details</h3>
    <p><strong>Date:</strong> {{ attendance?.date }}</p>
    <p><strong>Check-In:</strong> {{ attendance?.checkIn }}</p>
    <p><strong>Check-Out:</strong> {{ attendance?.checkOut }}</p>
    <p><strong>Status:</strong> {{ attendance?.attendanceStatus }}</p>
    <button (click)="closePopup()">Close</button>
  </div>
</div>
  <div *ngIf="attendanceList.length === 0">
    <p>No Attendance records found.</p>
  </div>
</div>



<div class="custom-modal" *ngIf="isModalOpen">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title text-center">
        <i class="check-icon">✔</i> Check-In Successful
      </h5>
    </div>
    <div class="modal-body">
      <p>You have successfully checked in for the day.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-confirm" (click)="closeModal()">OK</button>
    </div>
  </div>
</div> -->



<app-bdm-navbar></app-bdm-navbar>

<div class="attendance-container">

  <div class="button-container">
    <!-- Check In button should be visible only if time is valid and employee hasn't checked in or completed the day -->
    <button *ngIf="isTimeValid && !isCheckedIn && !isCheckInOutCompleted"
    class="checkin-button" (click)="checkIn()">
      Check In
    </button>

    <!-- Check Out button should be visible only if time is valid, employee has checked in, and check-out is not completed -->
    <button *ngIf="isTimeValid && isCheckedIn && !isCheckInOutCompleted" class="checkout-button" (click)="checkOut()">
      Check Out
    </button>
  </div>
  <h2>Attendance History</h2>
  <div class="attendance-history" *ngIf="attendanceList.length > 0">
    <div class="scrollable-table">
      <table class="styled-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Check-In</th>
            <th>Check-Out</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of attendanceList">
            <!-- <td>{{ record.date }}</td> -->
            <td>{{ record.date | date: 'dd-MM-yyyy' }}</td>

            <td>{{ record.checkIn }}</td>
            <td>{{ record.checkOut }}</td>
            <td>{{ record.attendanceStatus }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>



  
  <div class="checkout-modal" *ngIf="isModalOpen_2">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" style="color: red;">
          <i class="checkout-icon">⏰</i>Check-Out Successful
        </h5>
      </div>
      <div class="modal-body">
        <p>Thank you! You have successfully checked out for the day.</p>

        <h3 style="color: #4caf50; text-decoration: underline;">Attendance Details</h3>
        <div class="details-section">
          <p><strong>Date:</strong> {{ attendance?.date }}</p>
          <p><strong>Check-In Time:</strong> {{ attendance?.checkIn }}</p>
          <p><strong>Check-Out Time:</strong> {{ attendance?.checkOut }}</p>
          <p><strong>Status:</strong> {{ attendance?.attendanceStatus }}</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-confirm" (click)="closeModal_2()">OK</button>
      </div>
    </div>
  </div>
  
  

  <div *ngIf="attendanceList.length === 0">
    <p>No attendance records found.</p>
  </div>
</div>

<div class="custom-modal" *ngIf="isModalOpen">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title text-center">
        <i class="check-icon">✔</i> Check-In Successful
      </h5>
    </div>
    <div class="modal-body">
      <p>You have successfully checked in for the day.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-confirm" (click)="closeModal()">OK</button>
    </div>
  </div>
</div>